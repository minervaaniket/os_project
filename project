#include<stdio.h>
#include<conio.h>
#include<time.h>
#include<windows.h>
int main()
{
 
 int process[10],burst[10],duplicate[10];
 int waiting[10],turnaround[10],completion[10],start[10];
 int i,j,smallest,count=0,time,n;
 double avg=0,tt=0,end;
 printf("\nbefore sleep ");
 Sleep(3000); 
 printf("\nEnter the number of Processes: ");
 scanf("%d",&n);
 
 for(i=0;i<n;i++)
 {
   printf("\nEnter arrival time of process %d : ",i+1);
   scanf("%d",&process[i]);
   process[i]=process[i]-3;
   if(process[i]<=0)
   {
   	process[i]=0;
   }
   printf("\nEnter burst time of process %d : ",i+1);
   scanf("%d",&burst[i]); 	
   duplicate[i]=burst[i];
 }
  burst[9]=9999;
 
 //printf("time => process number");
 
 for(time=0;count!=n;time++)
 {
   smallest=9;
  for(i=0;i<n;i++)
  {
   if(process[i]<=time && burst[i]<burst[smallest] && burst[i]>0 )
   smallest=i;
  }
  if(burst[smallest]==duplicate[smallest])
  {
  	start[i]=time-1;
  }
  burst[smallest]--;
  //printf("\n%d => p%d",time+1,smallest);
  if(burst[smallest]==0)
  {
   count++;
   end=time+1;
   completion[smallest] = end;
   waiting[smallest] = end - process[smallest] - duplicate[smallest];
   turnaround[smallest] = end - process[smallest];
   // printf("\n %d  %d   %d",smallest,wt[smallest],ttp[smallest]);
  }
 }
 
 for(int i=0;i<n;i++)
 {
 	process[i]=process[i]+3;
 }
 
 printf("pid \t burst \t arrival \twaiting \tstart \tturnaround \tcompletion");
 for(i=0;i<n;i++)
 {
   printf("\n %d \t   %d \t %d \t%d \t%d \t%d \t%d",i+1,duplicate[i],process[i],waiting[i],start[i],turnaround[i],completion[i]);
   avg = avg + waiting[i];
   tt = tt + turnaround[i];
 }
 printf("\n  %If   %If",avg,tt);
 printf("\n\nAverage waiting time = %lf\n",avg/n);
 printf("Average Turnaround time = %lf",tt/n);
 getch();
}
